Categories:
  - Multimedia
License: GPL-2.0-or-later
AuthorName: Urs Fleisch
AuthorEmail: ufleisch@users.sourceforge.net
WebSite: https://kid3.kde.org/
SourceCode: https://invent.kde.org/multimedia/kid3.git
IssueTracker: https://invent.kde.org/multimedia/kid3/-/issues
Changelog: https://invent.kde.org/multimedia/kid3/-/releases
Donate: https://kde.org/community/donations/others/

AutoName: Kid3
Description: |-
  With Kid3, an audio tag editor, you can:

  * Edit ID3v1.1 tags in your MP3 files
  * Edit all ID3v2.3 and ID3v2.4 frames in your MP3 files
  * Convert between ID3v1.1, ID3v2.3 and ID3v2.4 tags
  * Edit tags in MP3, Ogg/Vorbis, Opus, DSF, FLAC, MPC, APE, MP4/AAC, MP2, Speex, TrueAudio, WavPack, WMA, WAV, AIFF files and tracker modules.
  * Edit tags of multiple files, e.g. the artist, album, year and genre of all files of an album typically have the same values and can be set together
  * Generate tags from filenames
  * Generate tags from the contents of tag fields
  * Generate filenames from tags
  * Generate playlist files
  * Automatic case conversion and string translation
  * Import from gnudb.org, TrackType.org, MusicBrainz, Discogs, Amazon

RepoType: git
Repo: https://invent.kde.org/kde/kid3.git

Builds:
  - versionName: 3.7.1
    versionCode: 15
    commit: v3.7.1
    sudo:
      - apt-get update
      - apt-get install -y docbook-xsl p7zip
    output: android-build/kid3/android/bin/QtApp-release-unsigned.apk
    target: android-19
    build:
      - export ANDROID_SDK_ROOT=$$SDK$$ ANDROID_NDK_ROOT=$$NDK$$
      - mkdir -p qt android-build
      - cd qt
      - for ms in qttranslations:e08e6b4db93a7b761d64d5bedbeaaf7c4c9e9f0b qttools:1afbf2026f8db7a55c5dca857c50469fdd24ca77
        qtsvg:d1287d3523773a4daf9c7af5c0c1137708614a68 qtquickcontrols2:445b1fb541479c6ad0fca349e8629549b7679ca5
        qtmultimedia:304cd3dcb3ac4cb00adf3a0e2a0c903d9eec0a69 qtimageformats:06ef7ff597d6b429fae3074e137e9a2ada779988
        qtdeclarative:857fd00eb5be840fa89632c9d45d3ed49fa089a4 qtbase:0a8186830b6a70e8962a6f1d9c632a4265af05a2
        qtandroidextras:bca23aacc75ae5e509463152cd5c7722c0eae9f0; do m=${ms%:*}; s=${ms#*:};
        fn=5.9.7-0-201810181505${m}-Linux-RHEL_7_4-GCC-Android-Android_ANY-ARMv7.7z;
        wget -q https://download.qt.io/online/qtsdkrepository/linux_x64/android/qt5_597/qt.qt5.597.android_armv7/$fn;
        echo "$s  $fn" | sha1sum -c
      - 7zr x $fn; done
      - export QTPREFIX=$(pwd)/5.9.7/android_armv7
      - cd ../android-build
      - COMPILER=cross-android ../buildlibs.sh
    ndk: r10e

  - versionName: 3.8.0
    versionCode: 16
    commit: v3.8.0
    sudo:
      - apt-get update
      - apt-get install -y docbook-xsl p7zip
    output: android-build/kid3/android/build/outputs/apk/release/android-release-unsigned.apk
    target: android-22
    build:
      - export ANDROID_SDK_ROOT=$$SDK$$ ANDROID_NDK_ROOT=$$NDK$$
      - mkdir -p qt android-build
      - cd qt
      - for ms in qttranslations:b64ae71035fbc1b82fc7111f7d1ff04886aaeb56 qttools:e06cd25eb36b8617897b2c3334dc2cbe1295b974
        qtsvg:b16cc7ca9dd88d0e0b0be1341becadb133f6dd4a qtquickcontrols2:01b4f3bf0bc65b528827aae88554f25409ee1dbd
        qtmultimedia:29cada686ea1505b5fb2c9818496f65f701ddf08 qtimageformats:6d55fab04c23577ac97aeb5fe168252426f5229d
        qtdeclarative:62983f284b96a85a193c3b82ec166ed80a964722 qtbase:b29bcbfa9c0d0a7216851fe2051615379930f1d2
        qtandroidextras:a3f7a78d5c997339ce59d821e9388a7f0919dcbc; do m=${ms%:*}; s=${ms#*:};
        fn=5.12.4-0-201906140209${m}-Linux-RHEL_7_4-Clang-Android-Android_ANY-ARMv7.7z;
        wget -q https://download.qt.io/online/qtsdkrepository/linux_x64/android/qt5_5124/qt.qt5.5124.android_armv7/$fn;
        echo "$s  $fn" | sha1sum -c
      - 7zr x $fn; done
      - export QTPREFIX=$(pwd)/5.12.4/android_armv7
      - cd ../android-build
      - COMPILER=cross-android ../buildlibs.sh
    ndk: r19c

  - versionName: 3.8.1
    versionCode: 17
    commit: v3.8.1
    sudo:
      - apt-get update
      - apt-get install -y docbook-xsl p7zip
    output: android-build/kid3/android/build/outputs/apk/release/android-release-unsigned.apk
    target: android-22
    build:
      - export ANDROID_SDK_ROOT=$$SDK$$ ANDROID_NDK_ROOT=$$NDK$$
      - mkdir -p qt android-build
      - cd qt
      - for ms in qttranslations:b64ae71035fbc1b82fc7111f7d1ff04886aaeb56 qttools:e06cd25eb36b8617897b2c3334dc2cbe1295b974
        qtsvg:b16cc7ca9dd88d0e0b0be1341becadb133f6dd4a qtquickcontrols2:01b4f3bf0bc65b528827aae88554f25409ee1dbd
        qtmultimedia:29cada686ea1505b5fb2c9818496f65f701ddf08 qtimageformats:6d55fab04c23577ac97aeb5fe168252426f5229d
        qtdeclarative:62983f284b96a85a193c3b82ec166ed80a964722 qtbase:b29bcbfa9c0d0a7216851fe2051615379930f1d2
        qtandroidextras:a3f7a78d5c997339ce59d821e9388a7f0919dcbc; do m=${ms%:*}; s=${ms#*:};
        fn=5.12.4-0-201906140209${m}-Linux-RHEL_7_4-Clang-Android-Android_ANY-ARMv7.7z;
        wget -q https://download.qt.io/online/qtsdkrepository/linux_x64/android/qt5_5124/qt.qt5.5124.android_armv7/$fn;
        echo "$s  $fn" | sha1sum -c
      - 7zr x $fn; done
      - export QTPREFIX=$(pwd)/5.12.4/android_armv7
      - cd ../android-build
      - COMPILER=cross-android ../buildlibs.sh
    ndk: r19c

  - versionName: 3.8.2
    versionCode: 18
    commit: v3.8.2
    sudo:
      - apt-get update
      - apt-get install -y docbook-xsl p7zip
    output: android-build/kid3/android/build/outputs/apk/release/android-release-unsigned.apk
    target: android-22
    build:
      - export ANDROID_SDK_ROOT=$$SDK$$ ANDROID_NDK_ROOT=$$NDK$$
      - mkdir -p qt android-build
      - cd qt
      - for ms in qttranslations:b64ae71035fbc1b82fc7111f7d1ff04886aaeb56 qttools:e06cd25eb36b8617897b2c3334dc2cbe1295b974
        qtsvg:b16cc7ca9dd88d0e0b0be1341becadb133f6dd4a qtquickcontrols2:01b4f3bf0bc65b528827aae88554f25409ee1dbd
        qtmultimedia:29cada686ea1505b5fb2c9818496f65f701ddf08 qtimageformats:6d55fab04c23577ac97aeb5fe168252426f5229d
        qtdeclarative:62983f284b96a85a193c3b82ec166ed80a964722 qtbase:b29bcbfa9c0d0a7216851fe2051615379930f1d2
        qtandroidextras:a3f7a78d5c997339ce59d821e9388a7f0919dcbc; do m=${ms%:*}; s=${ms#*:};
        fn=5.12.4-0-201906140209${m}-Linux-RHEL_7_4-Clang-Android-Android_ANY-ARMv7.7z;
        wget -q https://download.qt.io/online/qtsdkrepository/linux_x64/android/qt5_5124/qt.qt5.5124.android_armv7/$fn;
        echo "$s  $fn" | sha1sum -c
      - 7zr x $fn; done
      - export QTPREFIX=$(pwd)/5.12.4/android_armv7
      - cd ../android-build
      - COMPILER=cross-android ../buildlibs.sh
    ndk: r19c

  - versionName: 3.8.3
    versionCode: 19
    commit: v3.8.3
    sudo:
      - apt-get update
      - apt-get install -y docbook-xsl p7zip
    output: android-build/kid3/android/build/outputs/apk/release/android-release-unsigned.apk
    target: android-22
    build:
      - export ANDROID_SDK_ROOT=$$SDK$$ ANDROID_NDK_ROOT=$$NDK$$
      - mkdir -p qt android-build
      - cd qt
      - for ms in qttranslations:b64ae71035fbc1b82fc7111f7d1ff04886aaeb56 qttools:e06cd25eb36b8617897b2c3334dc2cbe1295b974
        qtsvg:b16cc7ca9dd88d0e0b0be1341becadb133f6dd4a qtquickcontrols2:01b4f3bf0bc65b528827aae88554f25409ee1dbd
        qtmultimedia:29cada686ea1505b5fb2c9818496f65f701ddf08 qtimageformats:6d55fab04c23577ac97aeb5fe168252426f5229d
        qtdeclarative:62983f284b96a85a193c3b82ec166ed80a964722 qtbase:b29bcbfa9c0d0a7216851fe2051615379930f1d2
        qtandroidextras:a3f7a78d5c997339ce59d821e9388a7f0919dcbc; do m=${ms%:*}; s=${ms#*:};
        fn=5.12.4-0-201906140209${m}-Linux-RHEL_7_4-Clang-Android-Android_ANY-ARMv7.7z;
        wget -q https://download.qt.io/online/qtsdkrepository/linux_x64/android/qt5_5124/qt.qt5.5124.android_armv7/$fn;
        echo "$s  $fn" | sha1sum -c
      - 7zr x $fn; done
      - export QTPREFIX=$(pwd)/5.12.4/android_armv7
      - cd ../android-build
      - COMPILER=cross-android ../buildlibs.sh
    ndk: r19c

  - versionName: 3.8.4
    versionCode: 20
    commit: v3.8.4
    sudo:
      - apt-get update
      - apt-get install -y docbook-xsl p7zip
    output: android-build/kid3/android/build/outputs/apk/release/android-release-unsigned.apk
    target: android-22
    build:
      - export ANDROID_SDK_ROOT=$$SDK$$ ANDROID_NDK_ROOT=$$NDK$$
      - mkdir -p qt android-build
      - cd qt
      - for ms in qttranslations:b64ae71035fbc1b82fc7111f7d1ff04886aaeb56 qttools:e06cd25eb36b8617897b2c3334dc2cbe1295b974
        qtsvg:b16cc7ca9dd88d0e0b0be1341becadb133f6dd4a qtquickcontrols2:01b4f3bf0bc65b528827aae88554f25409ee1dbd
        qtmultimedia:29cada686ea1505b5fb2c9818496f65f701ddf08 qtimageformats:6d55fab04c23577ac97aeb5fe168252426f5229d
        qtdeclarative:62983f284b96a85a193c3b82ec166ed80a964722 qtbase:b29bcbfa9c0d0a7216851fe2051615379930f1d2
        qtandroidextras:a3f7a78d5c997339ce59d821e9388a7f0919dcbc; do m=${ms%:*}; s=${ms#*:};
        fn=5.12.4-0-201906140209${m}-Linux-RHEL_7_4-Clang-Android-Android_ANY-ARMv7.7z;
        wget -q https://download.qt.io/online/qtsdkrepository/linux_x64/android/qt5_5124/qt.qt5.5124.android_armv7/$fn;
        echo "$s  $fn" | sha1sum -c
      - 7zr x $fn; done
      - export QTPREFIX=$(pwd)/5.12.4/android_armv7
      - cd ../android-build
      - COMPILER=cross-android ../buildlibs.sh
    ndk: r19c

  - versionName: 3.8.5
    versionCode: 21
    commit: v3.8.5
    sudo:
      - apt-get update
      - apt-get install -y docbook-xsl p7zip
    output: android-build/kid3/android/build/outputs/apk/release/android-release-unsigned.apk
    target: android-22
    build:
      - export ANDROID_SDK_ROOT=$$SDK$$ ANDROID_NDK_ROOT=$$NDK$$
      - mkdir -p qt android-build
      - cd qt
      - for ms in qttranslations:b64ae71035fbc1b82fc7111f7d1ff04886aaeb56 qttools:e06cd25eb36b8617897b2c3334dc2cbe1295b974
        qtsvg:b16cc7ca9dd88d0e0b0be1341becadb133f6dd4a qtquickcontrols2:01b4f3bf0bc65b528827aae88554f25409ee1dbd
        qtmultimedia:29cada686ea1505b5fb2c9818496f65f701ddf08 qtimageformats:6d55fab04c23577ac97aeb5fe168252426f5229d
        qtdeclarative:62983f284b96a85a193c3b82ec166ed80a964722 qtbase:b29bcbfa9c0d0a7216851fe2051615379930f1d2
        qtandroidextras:a3f7a78d5c997339ce59d821e9388a7f0919dcbc; do m=${ms%:*}; s=${ms#*:};
        fn=5.12.4-0-201906140209${m}-Linux-RHEL_7_4-Clang-Android-Android_ANY-ARMv7.7z;
        wget -q https://download.qt.io/online/qtsdkrepository/linux_x64/android/qt5_5124/qt.qt5.5124.android_armv7/$fn;
        echo "$s  $fn" | sha1sum -c
      - 7zr x $fn; done
      - export QTPREFIX=$(pwd)/5.12.4/android_armv7
      - cd ../android-build
      - COMPILER=cross-android ../buildlibs.sh
    ndk: r19c

  - versionName: 3.8.6
    versionCode: 22
    commit: v3.8.6
    sudo:
      - apt-get update
      - apt-get install -y docbook-xsl p7zip
    output: android-build/kid3/android/build/outputs/apk/release/android-release-unsigned.apk
    target: android-22
    build:
      - export ANDROID_SDK_ROOT=$$SDK$$ ANDROID_NDK_ROOT=$$NDK$$
      - mkdir -p qt android-build
      - cd qt
      - for ms in qttranslations:b64ae71035fbc1b82fc7111f7d1ff04886aaeb56 qttools:e06cd25eb36b8617897b2c3334dc2cbe1295b974
        qtsvg:b16cc7ca9dd88d0e0b0be1341becadb133f6dd4a qtquickcontrols2:01b4f3bf0bc65b528827aae88554f25409ee1dbd
        qtmultimedia:29cada686ea1505b5fb2c9818496f65f701ddf08 qtimageformats:6d55fab04c23577ac97aeb5fe168252426f5229d
        qtdeclarative:62983f284b96a85a193c3b82ec166ed80a964722 qtbase:b29bcbfa9c0d0a7216851fe2051615379930f1d2
        qtandroidextras:a3f7a78d5c997339ce59d821e9388a7f0919dcbc; do m=${ms%:*}; s=${ms#*:};
        fn=5.12.4-0-201906140209${m}-Linux-RHEL_7_4-Clang-Android-Android_ANY-ARMv7.7z;
        wget -q https://download.qt.io/online/qtsdkrepository/linux_x64/android/qt5_5124/qt.qt5.5124.android_armv7/$fn;
        echo "$s  $fn" | sha1sum -c
      - 7zr x $fn; done
      - export QTPREFIX=$(pwd)/5.12.4/android_armv7
      - cd ../android-build
      - COMPILER=cross-android ../buildlibs.sh
    ndk: r19c

  - versionName: 3.8.7
    versionCode: 23
    commit: 9868d72d0bd0edc6f214ead539983284df6339bf
    sudo:
      - apt-get update
      - apt-get install -y docbook-xsl p7zip
    output: android-build/kid3/android/build/outputs/apk/release/android-release-unsigned.apk
    target: android-22
    build:
      - export ANDROID_SDK_ROOT=$$SDK$$ ANDROID_NDK_ROOT=$$NDK$$
      - mkdir -p qt android-build
      - cd qt
      - for ms in qttranslations:b64ae71035fbc1b82fc7111f7d1ff04886aaeb56 qttools:e06cd25eb36b8617897b2c3334dc2cbe1295b974
        qtsvg:b16cc7ca9dd88d0e0b0be1341becadb133f6dd4a qtquickcontrols2:01b4f3bf0bc65b528827aae88554f25409ee1dbd
        qtmultimedia:29cada686ea1505b5fb2c9818496f65f701ddf08 qtimageformats:6d55fab04c23577ac97aeb5fe168252426f5229d
        qtdeclarative:62983f284b96a85a193c3b82ec166ed80a964722 qtbase:b29bcbfa9c0d0a7216851fe2051615379930f1d2
        qtandroidextras:a3f7a78d5c997339ce59d821e9388a7f0919dcbc; do m=${ms%:*}; s=${ms#*:};
        fn=5.12.4-0-201906140209${m}-Linux-RHEL_7_4-Clang-Android-Android_ANY-ARMv7.7z;
        wget -q https://download.qt.io/online/qtsdkrepository/linux_x64/android/qt5_5124/qt.qt5.5124.android_armv7/$fn;
        echo "$s  $fn" | sha1sum -c
      - 7zr x $fn; done
      - export QTPREFIX=$(pwd)/5.12.4/android_armv7
      - cd ../android-build
      - COMPILER=cross-android ../buildlibs.sh
    ndk: r19c

  - versionName: 3.9.0
    versionCode: 24
    commit: v3.9.0
    sudo:
      - apt-get update
      - apt-get install -y docbook-xsl p7zip
    output: android-build/kid3/android/build/outputs/apk/release/android-release-unsigned.apk
    target: android-22
    build:
      - export ANDROID_SDK_ROOT=$$SDK$$ ANDROID_NDK_ROOT=$$NDK$$
      - mkdir -p qt android-build
      - cd qt
      - for ms in qttranslations:ef401daa0e172f178c2ee1adb3f3aec7bc191c4f qttools:b0d3475e862850aee18b1e538622e55f7f25e775
        qtsvg:8937ee9079519581da19883222cffb1bd16e8c9e qtquickcontrols2:5e01b99d1135a1aae9629628495a215f74244f87
        qtmultimedia:e1b97a22cc743727d278970602756664b8593e16 qtimageformats:5bf25b6f30388813b20fbd33f32a99dce97c5fa0
        qtdeclarative:b7bc68ded42d8470ee38053253346419f4194d78 qtbase:e958ec06bd358d2c99611940e5801ee96e339503
        qtandroidextras:479cb925803a93a37d93127e97ba0c22299981fe; do m=${ms%:*}; s=${ms#*:};
        fn=5.12.12-0-202111241513${m}-Linux-RHEL_7_4-Clang-Android-Android_ANY-ARMv7.7z;
        wget -q https://download.qt.io/online/qtsdkrepository/linux_x64/android/qt5_51212/qt.qt5.51212.android_armv7/$fn;
        echo "$s  $fn" | sha1sum -c
      - 7zr x $fn; done
      - export QTPREFIX=$(pwd)/5.12.12/android_armv7
      - cd ../android-build
      - COMPILER=cross-android ../build.sh
    ndk: r19c

  - versionName: 3.9.1
    versionCode: 25
    commit: 190360f17c9e3020d77236b16cdac807cdd95afc
    sudo:
      - apt-get update
      - apt-get install -y docbook-xsl p7zip
    output: android-build/kid3/android/build/outputs/apk/release/android-release-unsigned.apk
    target: android-22
    build:
      - export ANDROID_SDK_ROOT=$$SDK$$ ANDROID_NDK_ROOT=$$NDK$$
      - mkdir -p qt android-build
      - cd qt
      - for ms in qttranslations:ef401daa0e172f178c2ee1adb3f3aec7bc191c4f qttools:b0d3475e862850aee18b1e538622e55f7f25e775
        qtsvg:8937ee9079519581da19883222cffb1bd16e8c9e qtquickcontrols2:5e01b99d1135a1aae9629628495a215f74244f87
        qtmultimedia:e1b97a22cc743727d278970602756664b8593e16 qtimageformats:5bf25b6f30388813b20fbd33f32a99dce97c5fa0
        qtdeclarative:b7bc68ded42d8470ee38053253346419f4194d78 qtbase:e958ec06bd358d2c99611940e5801ee96e339503
        qtandroidextras:479cb925803a93a37d93127e97ba0c22299981fe; do m=${ms%:*}; s=${ms#*:};
        fn=5.12.12-0-202111241513${m}-Linux-RHEL_7_4-Clang-Android-Android_ANY-ARMv7.7z;
        wget -q https://download.qt.io/online/qtsdkrepository/linux_x64/android/qt5_51212/qt.qt5.51212.android_armv7/$fn;
        echo "$s  $fn" | sha1sum -c
      - 7zr x $fn; done
      - export QTPREFIX=$(pwd)/5.12.12/android_armv7
      - cd ../android-build
      - COMPILER=cross-android ../build.sh
    ndk: r19c

  - versionName: 3.9.2
    versionCode: 26
    commit: c10e0c38935e4c91d5c85a8d7037b1869f5dfd2a
    sudo:
      - apt-get update
      - apt-get install -y docbook-xsl p7zip
    output: android-build/kid3/android/build/outputs/apk/release/android-release-unsigned.apk
    target: android-22
    build:
      - export ANDROID_SDK_ROOT=$$SDK$$ ANDROID_NDK_ROOT=$$NDK$$
      - mkdir -p qt android-build
      - cd qt
      - for ms in qttranslations:ef401daa0e172f178c2ee1adb3f3aec7bc191c4f qttools:b0d3475e862850aee18b1e538622e55f7f25e775
        qtsvg:8937ee9079519581da19883222cffb1bd16e8c9e qtquickcontrols2:5e01b99d1135a1aae9629628495a215f74244f87
        qtmultimedia:e1b97a22cc743727d278970602756664b8593e16 qtimageformats:5bf25b6f30388813b20fbd33f32a99dce97c5fa0
        qtdeclarative:b7bc68ded42d8470ee38053253346419f4194d78 qtbase:e958ec06bd358d2c99611940e5801ee96e339503
        qtandroidextras:479cb925803a93a37d93127e97ba0c22299981fe; do m=${ms%:*}; s=${ms#*:};
        fn=5.12.12-0-202111241513${m}-Linux-RHEL_7_4-Clang-Android-Android_ANY-ARMv7.7z;
        wget -q https://download.qt.io/online/qtsdkrepository/linux_x64/android/qt5_51212/qt.qt5.51212.android_armv7/$fn;
        echo "$s  $fn" | sha1sum -c
      - 7zr x $fn; done
      - export QTPREFIX=$(pwd)/5.12.12/android_armv7
      - cd ../android-build
      - COMPILER=cross-android ../build.sh
    ndk: r19c

  - versionName: 3.9.3
    versionCode: 27
    commit: 825935334cbdf580000d1d84068d441883ceabf5
    sudo:
      - apt-get update
      - apt-get install -y 7zip build-essential cmake docbook-xsl make python-is-python3
      - apt-get remove openjdk-11-jdk-headless openjdk-11-jre-headless
      - echo "deb http://deb.debian.org/debian sid main" > /etc/apt/sources.list.d/sid.list
      - apt-get update
      - apt-get install -y -t sid openjdk-8-jdk-headless
    output: android-build/kid3/android/build/outputs/apk/release/android-release-unsigned.apk
    srclibs:
      - Qt5@v5.12.12
    prebuild:
      - sdkmanager 'platforms;android-28'
      - cd $$Qt5$$
      - ./init-repository -f --module-subset=essential,qtdeclarative,qtquickcontrols2,qtgraphicaleffects,qtandroidextras,qtmultimedia,qtsvg
    target: android-22
    build:
      - export JAVA_HOME=$(readlink -f /usr/bin/javac | sed "s:/bin/javac::")
      - export ANDROID_SDK_ROOT=$$SDK$$ ANDROID_NDK_ROOT=$$NDK$$
      - export ANDROID_API_VERSION=android-28
      - export PATH=${JAVA_HOME}/bin:${PATH}
      - export QT_BUILD=$(readlink -f ${PWD}/../srclib)/build-qt
      - export QTPREFIX=$(readlink -f ${PWD}/../srclib)/qt/5.12.12/android_armv7
      - rm -rf $QTPREFIX $QT_BUILD
      - mkdir -p $QTPREFIX $QT_BUILD
      - pushd ${QT_BUILD}
      - $$Qt5$$/configure -xplatform android-clang --disable-rpath -opensource -confirm-license
        -silent -prefix $QTPREFIX -release -nomake tests -nomake examples -no-sql-mysql
        -no-dbus -no-use-gold-linker -sysconfdir /etc/xdg -opengl es2 -android-sdk
        $$SDK$$ -android-ndk $$NDK$$ -android-ndk-host linux-x86_64 -android-arch
        armeabi-v7a -android-ndk-platform android-16 -skip qtwebengine -skip qtgamepad
        -skip qtwebchannel -skip qtwebview -skip qtwebsockets -skip qtwebglplugin
        -skip qtserialport -skip qtnetworkauth -skip qt3d -skip qtsensors -skip qtwayland
        -skip qtxmlpatterns -skip qtscxml -skip qtscript -skip qtconnectivity -no-feature-debug
        -no-feature-qml-debug -no-feature-qml-profiler -no-feature-itemmodeltester
      - make -s -j $(nproc)
      - make install
      - popd
      - mkdir -p android-build
      - cd android-build
      - COMPILER=cross-android ../build.sh
    ndk: r19c

  - versionName: 3.9.4
    versionCode: 28
    commit: b4a04820eb1ac883940b821983843a4a52070029
    sudo:
      - apt-get update
      - apt-get install -y 7zip build-essential cmake docbook-xsl make python-is-python3
      - apt-get remove openjdk-11-jdk-headless openjdk-11-jre-headless
      - echo "deb http://deb.debian.org/debian sid main" > /etc/apt/sources.list.d/sid.list
      - apt-get update
      - apt-get install -y -t sid openjdk-8-jdk-headless
    output: android-build/kid3/android/build/outputs/apk/release/android-release-unsigned.apk
    srclibs:
      - Qt5@v5.12.12
    prebuild:
      - sdkmanager 'platforms;android-28'
      - cd $$Qt5$$
      - ./init-repository -f --module-subset=essential,qtdeclarative,qtquickcontrols2,qtgraphicaleffects,qtandroidextras,qtmultimedia,qtsvg
    target: android-22
    build:
      - export JAVA_HOME=$(readlink -f /usr/bin/javac | sed "s:/bin/javac::")
      - export ANDROID_SDK_ROOT=$$SDK$$ ANDROID_NDK_ROOT=$$NDK$$
      - export ANDROID_API_VERSION=android-28
      - export PATH=${JAVA_HOME}/bin:${PATH}
      - export QT_BUILD=$(readlink -f ${PWD}/../srclib)/build-qt
      - export QTPREFIX=$(readlink -f ${PWD}/../srclib)/qt/5.12.12/android_armv7
      - rm -rf $QTPREFIX $QT_BUILD
      - mkdir -p $QTPREFIX $QT_BUILD
      - pushd ${QT_BUILD}
      - $$Qt5$$/configure -xplatform android-clang --disable-rpath -opensource -confirm-license
        -silent -prefix $QTPREFIX -release -nomake tests -nomake examples -no-sql-mysql
        -no-dbus -no-use-gold-linker -sysconfdir /etc/xdg -opengl es2 -android-sdk
        $$SDK$$ -android-ndk $$NDK$$ -android-ndk-host linux-x86_64 -android-arch
        armeabi-v7a -android-ndk-platform android-16 -skip qtwebengine -skip qtgamepad
        -skip qtwebchannel -skip qtwebview -skip qtwebsockets -skip qtwebglplugin
        -skip qtserialport -skip qtnetworkauth -skip qt3d -skip qtsensors -skip qtwayland
        -skip qtxmlpatterns -skip qtscxml -skip qtscript -skip qtconnectivity -no-feature-debug
        -no-feature-qml-debug -no-feature-qml-profiler -no-feature-itemmodeltester
      - make -s -j $(nproc)
      - make install
      - popd
      - mkdir -p android-build
      - cd android-build
      - COMPILER=cross-android ../build.sh
    ndk: r19c

  - versionName: 3.9.5
    versionCode: 29
    commit: 36698627ed3a01ee3a76f6c293fe3fc0978aecaf
    timeout: 14400
    sudo:
      - apt-get update
      - apt-get install -y 7zip build-essential cmake docbook-xsl make ninja-build
        python-is-python3 libclang-dev
    output: android-build/kid3/android/android-build/build/outputs/apk/release/android-build-release-unsigned.apk
    srclibs:
      - Qt5@v6.5.3
    prebuild:
      - sdkmanager 'platforms;android-33' 'build-tools;33.0.0'
      - cd $$Qt5$$
      - ./init-repository -f --module-subset=qtbase,qtdeclarative,qtimageformats,qtmultimedia,qtshadertools,qtsvg,qttools,qttranslations
    target: android-22
    build:
      - export JAVA_HOME=$(readlink -f /usr/bin/javac | sed "s:/bin/javac::")
      - export ANDROID_SDK_ROOT=$$SDK$$ ANDROID_NDK_ROOT=$$NDK$$
      - export ANDROID_API_VERSION=android-31
      - export PATH=${JAVA_HOME}/bin:${PATH}
      - export BUILD_DIR=$(readlink -f ${PWD})/android-build
      - export QT_HOST_BUILD=$(readlink -f ${PWD}/../srclib)/build-host-qt
      - export QT_HOST_PREFIX=$(readlink -f ${PWD}/../srclib)/qt/6.5.3/gcc_64
      - export QT_BUILD=$(readlink -f ${PWD}/../srclib)/build-qt
      - export QTPREFIX=$(readlink -f ${PWD}/../srclib)/qt/6.5.3/android_armv7
      - rm -rf $QT_HOST_PREFIX $QT_HOST_BUILD $QTPREFIX $QT_BUILD
      - mkdir -p $BUILD_DIR $QT_HOST_PREFIX $QT_HOST_BUILD $QTPREFIX $QT_BUILD
      - pushd ${BUILD_DIR}
      - COMPILER=cross-android ../build.sh libs
      - popd
      - pushd ${QT_HOST_BUILD}
      - $$Qt5$$/configure -opensource -confirm-license -prefix $QT_HOST_PREFIX -release
        -submodules qtbase,qttools -nomake tests -nomake examples -no-sql-mysql -no-dbus
        -no-openssl -no-glib -no-icu -no-cups -no-fontconfig -no-gtk -no-egl -skip
        qtnetwork,qtsql,qtxml,qtprintsupport,qttestlib,qtwebengine,qtgamepad,qtwebchannel
        -skip qtwebview,qtwebsockets,qtwebglplugin,qtserialport,qtnetworkauth,qt3d,qtsensors
        -skip qtwayland,qtxmlpatterns,qtscxml,qtscript,qtconnectivity,qtimageformats
        -skip qtlanguageserver,qtquicktimeline,qtquick3d,qt5compat,qtactiveqt,qtcharts
        -skip qtcoap,qtdatavis3d,qthttpserver,qtpositioning,qtdoc,qtgrpc,qtlocation,qtlottie
        -skip qtmqtt,qtopcua,qtquick3dphysics,qtquickeffectmaker,qtremoteobjects,qtserialbus
        -skip qtspeech,qtvirtualkeyboard -no-opengl -no-feature-debug -no-feature-itemmodeltester
        -no-feature-concurrent -- -D CMAKE_INSTALL_MESSAGE=NEVER
      - cmake --build . --parallel
      - cmake --install .
      - popd
      - pushd ${QT_BUILD}
      - $$Qt5$$/configure -platform android-clang --disable-rpath -opensource -confirm-license
        -silent -prefix $QTPREFIX -release -nomake tests -nomake examples -no-sql-mysql
        -no-dbus -no-use-gold-linker -sysconfdir /etc/xdg -opengl es2 -android-sdk
        $$SDK$$ -android-ndk $$NDK$$ -android-arch armeabi-v7a -android-ndk-platform
        android-23 -skip qtwebengine,qtgamepad,qtwebchannel,qtwebview,qtwebsockets,qtwebglplugin
        -skip qtserialport,qtnetworkauth,qt3d,qtsensors,qtwayland,qtxmlpatterns,qtscxml
        -skip qtscript,qtconnectivity,qtlanguageserver,qtquicktimeline,qtquick3d,qt5compat
        -skip qtactiveqt,qtcharts,qtcoap,qtdatavis3d,qthttpserver,qtpositioning,qtdoc,qtgrpc
        -skip qtlocation,qtlottie,qtmqtt,qtopcua,qtquick3dphysics,qtquickeffectmaker
        -skip qtremoteobjects,qtserialbus,qtspeech,qtvirtualkeyboard -no-feature-debug
        -no-feature-itemmodeltester -qt-host-path $QT_HOST_PREFIX -openssl-runtime
        -- -D OPENSSL_ROOT_DIR=$BUILD_DIR/buildroot/usr/local -D CMAKE_INSTALL_MESSAGE=NEVER
      - cmake --build . --parallel
      - cmake --install .
      - popd
      - pushd ${BUILD_DIR}
      - COMPILER=cross-android QTBINARYDIR=$QT_HOST_PREFIX/bin ../build.sh package
      - popd
    ndk: 23.1.7779620

  - versionName: 3.9.6
    versionCode: 30
    commit: 44e1328ad6a0269704830281823a4f7d8e0e4ba4
    timeout: 14400
    sudo:
      - apt-get update
      - apt-get install -y 7zip build-essential cmake docbook-xsl make ninja-build
        python-is-python3 libclang-dev
    output: android-build/kid3/android/android-build/build/outputs/apk/release/android-build-release-unsigned.apk
    srclibs:
      - Qt5@v6.5.3
    prebuild:
      - sdkmanager 'platforms;android-33' 'build-tools;33.0.0'
      - cd $$Qt5$$
      - ./init-repository -f --module-subset=qtbase,qtdeclarative,qtimageformats,qtmultimedia,qtshadertools,qtsvg,qttools,qttranslations
    target: android-22
    build:
      - export JAVA_HOME=$(readlink -f /usr/bin/javac | sed "s:/bin/javac::")
      - export ANDROID_SDK_ROOT=$$SDK$$ ANDROID_NDK_ROOT=$$NDK$$
      - export ANDROID_API_VERSION=android-31
      - export PATH=${JAVA_HOME}/bin:${PATH}
      - export BUILD_DIR=$(readlink -f ${PWD})/android-build
      - export QT_HOST_BUILD=$(readlink -f ${PWD}/../srclib)/build-host-qt
      - export QT_HOST_PREFIX=$(readlink -f ${PWD}/../srclib)/qt/6.5.3/gcc_64
      - export QT_BUILD=$(readlink -f ${PWD}/../srclib)/build-qt
      - export QTPREFIX=$(readlink -f ${PWD}/../srclib)/qt/6.5.3/android_armv7
      - rm -rf $QT_HOST_PREFIX $QT_HOST_BUILD $QTPREFIX $QT_BUILD
      - mkdir -p $BUILD_DIR $QT_HOST_PREFIX $QT_HOST_BUILD $QTPREFIX $QT_BUILD
      - pushd ${BUILD_DIR}
      - COMPILER=cross-android ../build.sh libs
      - popd
      - pushd ${QT_HOST_BUILD}
      - $$Qt5$$/configure -opensource -confirm-license -prefix $QT_HOST_PREFIX -release
        -submodules qtbase,qttools -nomake tests -nomake examples -no-sql-mysql -no-dbus
        -no-openssl -no-glib -no-icu -no-cups -no-fontconfig -no-gtk -no-egl -skip
        qtnetwork,qtsql,qtxml,qtprintsupport,qttestlib,qtwebengine,qtgamepad,qtwebchannel
        -skip qtwebview,qtwebsockets,qtwebglplugin,qtserialport,qtnetworkauth,qt3d,qtsensors
        -skip qtwayland,qtxmlpatterns,qtscxml,qtscript,qtconnectivity,qtimageformats
        -skip qtlanguageserver,qtquicktimeline,qtquick3d,qt5compat,qtactiveqt,qtcharts
        -skip qtcoap,qtdatavis3d,qthttpserver,qtpositioning,qtdoc,qtgrpc,qtlocation,qtlottie
        -skip qtmqtt,qtopcua,qtquick3dphysics,qtquickeffectmaker,qtremoteobjects,qtserialbus
        -skip qtspeech,qtvirtualkeyboard -no-opengl -no-feature-debug -no-feature-itemmodeltester
        -no-feature-concurrent -- -D CMAKE_INSTALL_MESSAGE=NEVER
      - cmake --build . --parallel
      - cmake --install .
      - popd
      - pushd ${QT_BUILD}
      - $$Qt5$$/configure -platform android-clang --disable-rpath -opensource -confirm-license
        -silent -prefix $QTPREFIX -release -nomake tests -nomake examples -no-sql-mysql
        -no-dbus -no-use-gold-linker -sysconfdir /etc/xdg -opengl es2 -android-sdk
        $$SDK$$ -android-ndk $$NDK$$ -android-arch armeabi-v7a -android-ndk-platform
        android-23 -skip qtwebengine,qtgamepad,qtwebchannel,qtwebview,qtwebsockets,qtwebglplugin
        -skip qtserialport,qtnetworkauth,qt3d,qtsensors,qtwayland,qtxmlpatterns,qtscxml
        -skip qtscript,qtconnectivity,qtlanguageserver,qtquicktimeline,qtquick3d,qt5compat
        -skip qtactiveqt,qtcharts,qtcoap,qtdatavis3d,qthttpserver,qtpositioning,qtdoc,qtgrpc
        -skip qtlocation,qtlottie,qtmqtt,qtopcua,qtquick3dphysics,qtquickeffectmaker
        -skip qtremoteobjects,qtserialbus,qtspeech,qtvirtualkeyboard -no-feature-debug
        -no-feature-itemmodeltester -qt-host-path $QT_HOST_PREFIX -openssl-runtime
        -- -D OPENSSL_ROOT_DIR=$BUILD_DIR/buildroot/usr/local -D CMAKE_INSTALL_MESSAGE=NEVER
      - cmake --build . --parallel
      - cmake --install .
      - popd
      - pushd ${BUILD_DIR}
      - COMPILER=cross-android QTBINARYDIR=$QT_HOST_PREFIX/bin ../build.sh package
      - popd
    ndk: 23.1.7779620

  - versionName: 3.9.6
    versionCode: 31
    commit: 44e1328ad6a0269704830281823a4f7d8e0e4ba4
    timeout: 14400
    sudo:
      - apt-get update
      - apt-get install -y 7zip build-essential cmake docbook-xsl make ninja-build
        python-is-python3 libclang-dev
    output: android-build/kid3/android/android-build/build/outputs/apk/release/android-build-release-unsigned.apk
    srclibs:
      - Qt5@v6.5.3
    prebuild:
      - sdkmanager 'platforms;android-33' 'build-tools;33.0.0'
      - cd $$Qt5$$
      - ./init-repository -f --module-subset=qtbase,qtdeclarative,qtimageformats,qtmultimedia,qtshadertools,qtsvg,qttools,qttranslations
    target: android-22
    build:
      - export JAVA_HOME=$(readlink -f /usr/bin/javac | sed "s:/bin/javac::")
      - export ANDROID_SDK_ROOT=$$SDK$$ ANDROID_NDK_ROOT=$$NDK$$
      - export ANDROID_API_VERSION=android-31
      - export PATH=${JAVA_HOME}/bin:${PATH}
      - export BUILD_DIR=$(readlink -f ${PWD})/android-build
      - export QT_HOST_BUILD=$(readlink -f ${PWD}/../srclib)/build-host-qt
      - export QT_HOST_PREFIX=$(readlink -f ${PWD}/../srclib)/qt/6.5.3/gcc_64
      - export QT_BUILD=$(readlink -f ${PWD}/../srclib)/build-qt
      - export QTPREFIX=$(readlink -f ${PWD}/../srclib)/qt/6.5.3/android_arm64_v8a
      - rm -rf $QT_HOST_PREFIX $QT_HOST_BUILD $QTPREFIX $QT_BUILD
      - mkdir -p $BUILD_DIR $QT_HOST_PREFIX $QT_HOST_BUILD $QTPREFIX $QT_BUILD
      - pushd ${BUILD_DIR}
      - COMPILER=cross-android ../build.sh libs
      - popd
      - pushd ${QT_HOST_BUILD}
      - $$Qt5$$/configure -opensource -confirm-license -prefix $QT_HOST_PREFIX -release
        -submodules qtbase,qttools -nomake tests -nomake examples -no-sql-mysql -no-dbus
        -no-openssl -no-glib -no-icu -no-cups -no-fontconfig -no-gtk -no-egl -skip
        qtnetwork,qtsql,qtxml,qtprintsupport,qttestlib,qtwebengine,qtgamepad,qtwebchannel
        -skip qtwebview,qtwebsockets,qtwebglplugin,qtserialport,qtnetworkauth,qt3d,qtsensors
        -skip qtwayland,qtxmlpatterns,qtscxml,qtscript,qtconnectivity,qtimageformats
        -skip qtlanguageserver,qtquicktimeline,qtquick3d,qt5compat,qtactiveqt,qtcharts
        -skip qtcoap,qtdatavis3d,qthttpserver,qtpositioning,qtdoc,qtgrpc,qtlocation,qtlottie
        -skip qtmqtt,qtopcua,qtquick3dphysics,qtquickeffectmaker,qtremoteobjects,qtserialbus
        -skip qtspeech,qtvirtualkeyboard -no-opengl -no-feature-debug -no-feature-itemmodeltester
        -no-feature-concurrent -- -D CMAKE_INSTALL_MESSAGE=NEVER
      - cmake --build . --parallel
      - cmake --install .
      - popd
      - pushd ${QT_BUILD}
      - $$Qt5$$/configure -platform android-clang --disable-rpath -opensource -confirm-license
        -silent -prefix $QTPREFIX -release -nomake tests -nomake examples -no-sql-mysql
        -no-dbus -no-use-gold-linker -sysconfdir /etc/xdg -opengl es2 -android-sdk
        $$SDK$$ -android-ndk $$NDK$$ -android-abis arm64-v8a -android-ndk-platform
        android-23 -skip qtwebengine,qtgamepad,qtwebchannel,qtwebview,qtwebsockets,qtwebglplugin
        -skip qtserialport,qtnetworkauth,qt3d,qtsensors,qtwayland,qtxmlpatterns,qtscxml
        -skip qtscript,qtconnectivity,qtlanguageserver,qtquicktimeline,qtquick3d,qt5compat
        -skip qtactiveqt,qtcharts,qtcoap,qtdatavis3d,qthttpserver,qtpositioning,qtdoc,qtgrpc
        -skip qtlocation,qtlottie,qtmqtt,qtopcua,qtquick3dphysics,qtquickeffectmaker
        -skip qtremoteobjects,qtserialbus,qtspeech,qtvirtualkeyboard -no-feature-debug
        -no-feature-itemmodeltester -qt-host-path $QT_HOST_PREFIX -openssl-runtime
        -- -D OPENSSL_ROOT_DIR=$BUILD_DIR/buildroot/usr/local -D CMAKE_INSTALL_MESSAGE=NEVER
      - cmake --build . --parallel
      - cmake --install .
      - popd
      - sed -i -e 's/\(set(QT_ANDROID_APP_VERSION_CODE\) .*/\1 $$VERCODE$$)/' CMakeLists.txt
      - pushd ${BUILD_DIR}
      - COMPILER=cross-android QTBINARYDIR=$QT_HOST_PREFIX/bin ../build.sh package
      - popd
    ndk: 23.1.7779620

AutoUpdateMode: Version
UpdateCheckMode: Tags ^v.*$
VercodeOperation:
  - '%c'
  - '%c+1'
UpdateCheckData: CMakeLists.txt|set\(QT_ANDROID_APP_VERSION_CODE\s+(\d+)\)|kid3.spec|Version:\s*(\S+)
CurrentVersion: 3.9.6
CurrentVersionCode: 31
